<section class="section fade-up">

  <!-- MODE A: User Selected a Car -->
  <div *ngIf="selectedCar" class="container">

    <h2 class="section-title mb-4">Rent {{ selectedCar.name }}</h2>
    <p class="section-subtitle">Fill out your rental details below.</p>

    <div class="row g-4">

      <!-- LEFT SIDE: Form -->
      <div class="col-lg-8">
        <div class="glass-card p-4">

          <h4 class="mb-3">Rental Details</h4>

          <!-- Pickup -->
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Pick-up Date</label>
              <input type="date" class="form-control"
                     [(ngModel)]="booking.pickupDate">
            </div>
            <div class="col-md-6">
              <label class="form-label">Pick-up Time</label>
              <input type="time" class="form-control"
                     [(ngModel)]="booking.pickupTime">
            </div>

            <div class="col-md-6">
              <label class="form-label">Drop-off Date</label>
              <input type="date" class="form-control"
                     [(ngModel)]="booking.dropoffDate">
            </div>
            <div class="col-md-6">
              <label class="form-label">Drop-off Time</label>
              <input type="time" class="form-control"
                     [(ngModel)]="booking.dropoffTime">
            </div>
          </div>

          <hr class="my-4">

          <h4 class="mb-3">Driver Information</h4>

          <input class="form-control mb-3" placeholder="Full name"
                 [(ngModel)]="booking.driverName">

          <input class="form-control mb-3" type="number" placeholder="Driver age"
                 [(ngModel)]="booking.driverAge">

          <hr class="my-4">

          <h4 class="mb-3">Extras</h4>

          <div class="form-check">
            <input class="form-check-input" type="checkbox"
                   [(ngModel)]="booking.gps">
            <label class="form-check-label">GPS (+5€)</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox"
                   [(ngModel)]="booking.babySeat">
            <label class="form-check-label">Baby Seat (+8€)</label>
          </div>

          <h4 class="mt-4">Insurance</h4>

          <div class="form-check">
            <input class="form-check-input" type="radio" name="insurance" value="standard"
                   [(ngModel)]="booking.insurance">
            <label class="form-check-label">Standard</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="radio" name="insurance" value="premium"
                   [(ngModel)]="booking.insurance">
            <label class="form-check-label">Premium (+12€)</label>
          </div>

        </div>
      </div>

      <!-- RIGHT SIDE: Summary -->
      <div class="col-lg-4">
        <div class="glass-card p-4 summary-card fade-up delay-2">

          <img [src]="selectedCar.imageUrl" class="img-fluid mb-3 rounded">

          <h4>{{ selectedCar.name }}</h4>
          <p class="text-muted">{{ selectedCar.brand }}</p>

          <h2 class="mt-3">{{ getTotalPrice() }} € / day</h2>

          <button class="btn-purple-grey w-100 mt-3"
                  (click)="confirmBooking()">
            Confirm Booking
          </button>
        </div>
      </div>

    </div>
  </div>

  <!-- MODE B: No Car Selected -->
  <div *ngIf="!selectedCar" class="container fade-up">

    <h2 class="section-title">Choose a Car</h2>
    <p class="section-subtitle mb-4">Select a vehicle to begin your rental.</p>

    <div class="row g-4">
      <div class="col-md-4"
           *ngFor="let car of vehicleService.getVehicles()">

        <div class="glass-card p-3 vehicle-grid-card"
             [routerLink]="['/rent']"
             [queryParams]="{ id: car.id }">

          <img [src]="car.imageUrl" class="img-fluid mb-2 rounded">

          <h4>{{ car.name }}</h4>
          <p class="text-muted">{{ car.brand }}</p>

          <h5>{{ car.pricePerDay }} € / day</h5>

          <button class="btn-purple w-100 mt-2">Select</button>
        </div>
      </div>
    </div>
  </div>

</section>
